/*
 * This file was generated by the Gradle 'init' task.
 */
import com.mkring.wildlydeplyplugin.DeployWildflyTask
plugins {
    id 'ear'
}

plugins {
    id "com.mkring.wildlydeplyplugin.deploy-wildfly-plugin" version "0.2.10-wildfly15"
}
//group = "x.y"
Map warMap =
    [
            'eritrium_contenedor_windows_war': '/eritrium']


dependencies {
    //compile project(':eritrium_contenedor_windows_war')
    //deploy project(path:':eritrium_contenedor_windows_war',configuration:'archives')
    warMap.each {
        deploy project(path:":$it.key",configuration:'archives')
    }

}

task deploy(type: DeployWildflyTask) {
    host = "127.0.0.1"
    port = 9990
    user = "pi"
    password = "DanielHerrero1"
    deploymentName = project.name
    runtimeName = project.name + "-" + version + ".ear"
    // filepath, here a war example
    file = "${buildDir}/libs/${project.name}-${version}.ear"
}

description = 'eritrium_contendor_windows_ear Maven Webapp'
jar {
    enabled = false
}

ear{
    deploymentDescriptor{
       // webModule(project(':eritrium_contenedor_windows_war').task('warr').property('archiveName'),"/eritrium")
        warMap.each {
            webModule(it.key + '-' + project.version + ".war", it.value)
        }
    }
}
